<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Gestion de pacientes</title>
    </h:head>
    <CENTER><h:body>
            <p:dialog id="PacienteOdoCreateDialog" closable="true" widgetVar="PacienteOdoCreateDialog" modal="true" resizable="false" appendTo="@(body)">
                <br/><CENTER> <h1> REGISTRAR PACIENTE </h1><b/> </CENTER>
                <br/><br/><h:form id="PacienteCreateForm">
                    <p:panelGrid id="panel" styleClass="panelgrid" >
                        <p:row >
                            <p:column style="font-weight:bold; color: white; background: #339cdf" colspan="6">
                                <p:outputLabel value="DATOS PERSONALES"/>
                            </p:column>
                            <br/></p:row>
                        <p:row>
                            <p:column style=" font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_tipoIdentificacion}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                            <p:column style="font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_identificacion}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                            <p:column style="font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_sexo}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:selectOneMenu filter="true" id="tipoIdentificacion" value="#{pacienteController.tipoIdentificacion}" required="true" requiredMessage="#{bundle.EditPacienteRequiredMessage_tipoIdentificacion}">
                                    <f:selectItem itemLabel="Seleccione..." itemValue="0"/>
                                    <f:selectItems value="#{tipoIdentificacionController.itemsAvailableSelectOne}"
                                                   var="tipoIdentificacionItem"
                                                   itemValue="#{tipoIdentificacionItem}"
                                                   itemLabel="#{tipoIdentificacionItem.nombre}"
                                                   />
                                </p:selectOneMenu>
                            </p:column>
                            <p:column>
                                <p:inputText id="identificacion" value="#{pacienteController.selected.identificacion}"
                                             title="#{bundle.CreatePacienteTitle_identificacion}" required="true"
                                             requiredMessage="Este campo es obligatorio">
                                    <f:validator validatorId="ValidarCampoNumeroIdentificacionPaciente"/>
                                    <f:validator validatorId="ValidarCampoNumericoPositivo"/>
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:validator validatorId="ValidarCampoMaximo20Caracteres"/>
                                    <p:ajax update="msgIdentificacion" event ="keyup" />
                                </p:inputText>
                            </p:column>
                            <p:column>
                                <p:selectOneRadio  id="sexo" value="#{pacienteController.selected.sexo}" 
                                                   >
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:selectItem itemLabel="F" itemValue='F' />
                                    <f:selectItem itemLabel="M" itemValue='M' />    

                                </p:selectOneRadio>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>

                            </p:column>
                            <p:column style="width: 200px">
                                <p:message for="identificacion" id="msgIdentificacion"/>
                            </p:column>
                            <p:column>

                            </p:column>

                        </p:row>
                        <p:row>
                            <p:column style=" font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="Nombres"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>

                            <p:column style=" font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="Apellidos"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                            <p:column style=" font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_ocupacion}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>

                        </p:row>
                        <p:row>
                            <p:column>
                                <p:inputText id="nombres"
                                             value="#{pacienteController.selected.nombres}"
                                             title="#{bundle.CreatePacienteTitle_nombres}" >
                                    <f:validator validatorId="ValidarCampoSoloLetrasYespacio"/>
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:validator validatorId="ValidarCampoMaximo20Caracteres"/>
                                    <p:ajax update="msgNombres" event ="keyup" />
                                </p:inputText> 

                            </p:column>

                            <p:column>
                                <p:inputText id="apellidos" 
                                             value="#{pacienteController.selected.apellidos}" 
                                             title="#{bundle.CreatePacienteTitle_apellidos}" >
                                    <f:validator validatorId="ValidarCampoSoloLetrasYespacio"/>
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:validator validatorId="ValidarCampoMaximo30Caracteres"/>
                                    <p:ajax update="msgApellidos" event ="keyup" />
                                </p:inputText>
                            </p:column>

                            <p:column>   
                                <p:inputText id="ocupacion" 
                                             value="#{pacienteController.selected.ocupacion}" 
                                             title="#{bundle.CreatePacienteTitle_ocupacion}" >
                                    <f:validator validatorId="ValidarCampoSoloLetrasYespacio"/>
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:validator validatorId="ValidarCampoMaximo30Caracteres"/>
                                    <p:ajax update="msgOcupacion" event ="keyup" />
                                </p:inputText>
                            </p:column>

                        </p:row>
                        <p:row>
                            <p:column>
                                <p:message for="nombres" id="msgNombres"/>
                            </p:column> 
                            <p:column>
                                <p:message for="apellidos" id="msgApellidos"/> 
                            </p:column>
                            <p:column>
                                <p:message for="ocupacion" id="msgOcupacion"/>  
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column style="font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_fechaNacimiento}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                            <p:column style="font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_direccion}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                            <p:column style=" font-size: 18px; font-weight:bold; color: black">
                                <p:outputLabel value="#{bundlePaciente.CreatePacienteLabel_telefono}"/>
                                <p:outputLabel style="font-style: italic; font-size: 16px; text-align: left; color: red;"  value="* " />
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <p:calendar placeholder="dd/mm/aaaa" id="fechaNacimiento" yearRange="c-80:c" navigator="true" pattern="MM-dd-yyyy" value="#{pacienteController.selected.fechaNacimiento}" title="#{bundle.EditPacienteTitle_fechaNacimiento}"  showOn="button">
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <f:validator validatorId="ValidarCampoFechaNacimiento"/>
                                    <p:ajax update="msgFechaNacimiento" event="keyup"/>
                                </p:calendar>
                            </p:column>
                            <p:column>
                                <p:inputText id="direccion" 
                                             value="#{pacienteController.selected.direccion}" 
                                             title="#{bundle.CreatePacienteTitle_direccion}" >
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <p:ajax update="msgDireccionResidencia" event ="keyup" />
                                </p:inputText>
                            </p:column>
                            <p:column>
                                <p:inputText id="telefono" 
                                             value="#{pacienteController.selected.telefono}" 
                                             title="#{bundle.CreatePacienteTitle_telefono}" >
                                    <f:validator validatorId="ValidarCampoObligatorio"/>
                                    <p:ajax update="msgDireccionResidencia" event ="keyup" />
                                </p:inputText>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:message for="fechaNacimiento" id="msgFechaNacimiento"/> 
                            </p:column>
                            <p:column>
                                <p:message for="direccion" id="msgDireccionResidencia"/> 
                            </p:column>
                            <p:column>
                                <p:message for="telefono" id="msgTelefono"/> 
                            </p:column>
                        </p:row>                    
                    </p:panelGrid><br/><br/>
                    <p:commandButton action="#{pacienteController.registrarPaciente()}" 
                                     value="Guardar paciente" ajax="true" update="panel"
                                     onstart="PF('cargando').show()"  onsuccess="PF('cargando').hide()"/>
                </h:form>
                <!--<p:dialog header="Mensaje registro" modal="true" position="center" widgetVar="RegistroExitoso">
                    <h:form id="mensajeForm">
                        <h:panelGrid columns="2" >
                            <p:graphicImage width="50px" height="50px" library="img" name="exitoso.png" />
                            <p:outputLabel value="La información del paciente se registro con exito" />
                            <p:commandButton value="Aceptar" onclick="PF('RegistroExitoso').hide()" />
                        </h:panelGrid>

                    </h:form>
                </p:dialog>-->
            </p:dialog>
        </h:body></CENTER> 
</html>
